(()=>{"use strict";const e=document.getElementById("form"),t=document.querySelector(".comments__container");document.querySelectorAll(".comments__body");let n=document.querySelector(".comments");function o(e){e.classList.add("_error")}function a(e){e.classList.remove("_error")}e.addEventListener("submit",(function(n){n.preventDefault();let s=function(e){let t=0,n=document.querySelectorAll("._req");for(let e=0;e<n.length;e++){const s=n[e];a(s),"name"!==s.getAttribute("name")||s.value||(o(s),s.nextElementSibling||s.insertAdjacentHTML("afterend","<div class='form__error'>\n                    Введите имя\n                </div>"),t++),"textarea"===s.getAttribute("name")&&s.value.length<5&&(o(s),s.nextElementSibling||s.insertAdjacentHTML("afterend","<div class='form__error'>\n                        Введите текст, длина которого больше 5 символов\n                    </div>"),t++),s.addEventListener("focus",(function(e){s.nextElementSibling&&(s.nextSibling.remove(),a(s))}))}return t}(),c=new FormData(this);if(0===s){let n=c.get("name"),o=c.get("textarea"),a=c.get("date"),s=(new Date).toLocaleTimeString("ru"),r="";a&&(new Date).toLocaleDateString("ru")!=new Date(a).toLocaleDateString("ru")?new Date(Date.now()-864e5).toLocaleDateString("ru")==new Date(a).toLocaleDateString("ru")?(a=s.slice(0,s.length-3),r="Вчера:"):a=new Date(a).toLocaleDateString("ru"):(a=s.slice(0,s.length-3),r="Сегодня:"),t.insertAdjacentHTML("beforeend",`\n            <div class="comments__body">\n                <h3 class="comments__name">${n}</h3>\n                <h3 class="comments__date">${r}${a}</h3>\n                <p class="comments__comment">\n                    ${o}\n                </p>\n                <div class="comments__buttons">\n                    <button class="comments__btn comments__btn-delete">Удалить</button>\n                    <button class="comments__btn comments__btn-like">Лайк</button>\n                </div>\n            </div>\n            `),e.reset()}else console.log("Форма не отправилась")})),new MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&e.addedNodes.length&&e.addedNodes.forEach((e=>{e.addEventListener("click",(function(t){t.target.classList.contains("comments__btn-delete")&&e.remove(),t.target.classList.contains("comments__btn-like")&&t.target.classList.toggle("like")}))}))}))})).observe(n,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})})();